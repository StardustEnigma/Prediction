{% load static tailwind_tags %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Employee Feedback Form - AttritionAI</title>
    {% load static %}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    {% tailwind_css %}
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #581c87 0%, #7c3aed 50%, #8b5cf6 100%);
        }
        .btn-primary {
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.3);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.4);
        }
        .btn-secondary {
            background: rgba(168, 85, 247, 0.1);
            border: 2px solid #a855f7;
            color: #7c3aed;
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: #a855f7;
            color: white;
        }
        .form-field {
            transition: all 0.3s ease;
        }
        .form-field:focus {
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }
        .logo-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #a855f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-purple-50 to-violet-50 min-h-screen flex flex-col">
    <!-- Header -->
    <header class="gradient-bg shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex items-center justify-between flex-wrap">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-br from-purple-400 to-violet-500 rounded-xl flex items-center justify-center shadow-lg">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold tracking-tight select-none text-white">
                    Attrition<span class="logo-gradient">AI</span>
                </h1>
            </div>
            <a href="{% url 'dashboard' %}"
               class="mt-4 sm:mt-0 text-purple-100 hover:text-white font-medium px-4 py-2 rounded-lg transition-all duration-300 whitespace-nowrap">
                ‚Üê Back to Dashboard
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full">
        <!-- Form Header -->
        <section class="text-center mb-12 px-2">
            <h2 class="text-4xl font-bold text-gray-900 mb-4">
                Employee Feedback Form
            </h2>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                Help us analyze retention patterns by providing comprehensive employee information for our AI-powered insights.
            </p>
        </section>

        <!-- Form Card -->
        <section class="bg-white rounded-2xl shadow-xl border border-purple-100 overflow-hidden p-6 sm:p-10">
            <form method="post" class="space-y-8" novalidate>
                {% csrf_token %}

                <!-- Personal Information Section -->
                <fieldset class="border-b border-purple-100 pb-8">
                    <legend class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                        <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        Personal Information
                    </legend>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        {% for field in form %}
                            {% if field.name in "employee_id age gender marital_status education health_condition" %}
                            <div>
                                <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    {{ field.label }}
                                    {% if field.field.required %} <span class="text-red-600">*</span>{% endif %}
                                </label>
                                {{ field|add_class:"form-field w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-0 text-gray-900" }}
                                {% if field.help_text %}
                                <p class="text-xs text-gray-400 mt-1">{{ field.help_text }}</p>
                                {% endif %}
                                {% if field.errors %}
                                    <ul class="text-red-600 text-sm mt-1 list-disc list-inside">
                                    {% for error in field.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </fieldset>

                <!-- Work Information Section -->
                <fieldset class="border-b border-purple-100 pb-8">
                    <legend class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                        <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0H8m8 0v2a2 2 0 01-2 2H10a2 2 0 01-2-2V6"></path>
                        </svg>
                        Work Information
                    </legend>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        {% for field in form %}
                            {% if field.name in "years_at_company working_hours distance_from_home expectations_from_company" %}
                            <div>
                                <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    {{ field.label }}
                                    {% if field.field.required %} <span class="text-red-600">*</span>{% endif %}
                                </label>
                                {{ field|add_class:"form-field w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-0 text-gray-900" }}
                                {% if field.help_text %}
                                <p class="text-xs text-gray-400 mt-1">{{ field.help_text }}</p>
                                {% endif %}
                                {% if field.errors %}
                                    <ul class="text-red-600 text-sm mt-1 list-disc list-inside">
                                    {% for error in field.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </fieldset>

                <!-- Satisfaction & Compensation Section -->
                <fieldset>
                    <legend class="text-2xl font-semibold text-gray-900 mb-6 flex items-center">
                        <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Satisfaction & Compensation
                    </legend>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        {% for field in form %}
                            {% if field.name in "job_satisfaction environment_satisfaction joining_salary current_salary" %}
                            <div>
                                <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
                                    {{ field.label }}
                                    {% if field.field.required %} <span class="text-red-600">*</span>{% endif %}
                                </label>
                                {{ field|add_class:"form-field w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-0 text-gray-900" }}
                                {% if field.help_text %}
                                <p class="text-xs text-gray-400 mt-1">{{ field.help_text }}</p>
                                {% endif %}
                                {% if field.errors %}
                                    <ul class="text-red-600 text-sm mt-1 list-disc list-inside">
                                    {% for error in field.errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                    </ul>
                                {% endif %}
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </fieldset>

                <!-- Form Actions -->
                <div class="flex flex-col sm:flex-row gap-4 pt-8">
                    <button 
                        type="submit"
                        class="btn-primary flex-1 text-white font-semibold py-4 px-8 rounded-xl text-lg flex items-center justify-center"
                        aria-label="Submit Feedback"
                    >
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Submit Feedback
                    </button>
                    <button 
                        type="button"
                        onclick="window.history.back()" 
                        class="btn-secondary flex-1 font-semibold py-4 px-8 rounded-xl text-lg flex items-center justify-center"
                        aria-label="Cancel and go back"
                    >
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        Cancel
                    </button>
                </div>
            </form>
        </section>

        <!-- Info Section -->
        <section class="mt-12 bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl border border-purple-100 p-6 sm:p-8">
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0">
                    <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div>
                    <h4 class="text-lg font-semibold text-gray-900 mb-2">About This Form</h4>
                    <p class="text-gray-600 text-sm leading-relaxed">
                        This comprehensive feedback form helps our AI system analyze employee retention patterns and predict potential attrition risks.
                        All information provided is kept confidential and used solely for predictive analytics to improve workplace satisfaction and retention strategies.
                    </p>
                </div>
            </div>
        </section>
    </main>
</body>
</html>
